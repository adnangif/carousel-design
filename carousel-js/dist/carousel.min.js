/**
 * CarouselJS - A lightweight, zero-dependency JavaScript carousel library
 * @version 1.0.0
 * @author Original author
 * @license MIT
 */
(function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.CarouselJS=e()}("undefined"!=typeof self?self:this,function(){"use strict";return class{constructor(t){if(!t||!t.selector)throw new Error("CarouselJS: Container selector is required");if(!t.items||!Array.isArray(t.items))throw new Error("CarouselJS: Items array is required");if(this.options=Object.assign({totalItems:Math.min(7,t.items.length),visibleItems:3,autoRotateDelay:5e3,autoRotate:!0,adaptToMobile:!0,mobileBreakpoint:768,mobileVisibleItems:1,renderItem:this._defaultRenderItem.bind(this),onSlideChange:null},t),this.options.visibleItems>=this.options.totalItems&&(console.warn("CarouselJS: visibleItems must be less than totalItems. Setting visibleItems to totalItems - 1"),this.options.visibleItems=this.options.totalItems-1),this.options.totalItems>this.options.items.length&&(console.warn(`CarouselJS: totalItems (${this.options.totalItems}) exceeds available items (${this.options.items.length}). Using ${this.options.items.length} items.`),this.options.totalItems=this.options.items.length),this.container=document.querySelector(this.options.selector),!this.container)throw new Error(`CarouselJS: Container not found with selector: ${this.options.selector}`);this.items=this.options.items,this.N=this.options.totalItems,this.X=this.options.adaptToMobile&&this._isMobileDevice()?this.options.mobileVisibleItems:this.options.visibleItems,this.anchorTime=null,this.autoRotateInterval=null,this.carousel=null,this.btnLeft=null,this.btnRight=null,this._init()}_init(){this._createCarouselStructure(),this._setupEventListeners(),this._setupVariables(this.N,this.X),this._updatePagination(0,this.N,this.X),this.options.autoRotate&&this._startAutoRotation()}_createCarouselStructure(){this.container.classList.contains("slider")||(this.container.classList.add("slider"),this.container.innerHTML='\n          <button class="nav-btn btn-left"><img src="icons/left-arrow.svg" alt="Previous" /></button>\n          <button class="nav-btn btn-right"><img src="icons/right-arrow.svg" alt="Next" /></button>\n          <div class="fading">\n            <div id="carousel-track" class="slide-track"></div>\n            <div id="carousel-pagination" class="pagination"></div>\n          </div>\n        '),this.carousel=this.container.querySelector(".slide-track"),this.pagination=this.container.querySelector(".pagination"),this.btnLeft=this.container.querySelector(".nav-btn.btn-left"),this.btnRight=this.container.querySelector(".nav-btn.btn-right"),this._handleCarouselCreation(this.items.slice(0,this.N))}_setupEventListeners(){this.btnRight.addEventListener("click",this._gotoNextSlideAction.bind(this)),this.btnLeft.addEventListener("click",this._gotoPrevSlideAction.bind(this)),document.addEventListener("keydown",this._handleKeyPress.bind(this)),this.options.adaptToMobile&&window.addEventListener("resize",this._handleResize.bind(this))}_handleResize(){const t=this._isMobileDevice(),e=t?this.options.mobileVisibleItems:this.options.visibleItems;e!==this.X&&(this.X=e,this._setupVariables(this.N,this.X),this._updatePagination(0,this.N,this.X))}_isMobileDevice(){return window.innerWidth<=this.options.mobileBreakpoint}_handleKeyPress(t){"ArrowRight"===t.key?this._gotoNextSlideAction():"ArrowLeft"===t.key&&this._gotoPrevSlideAction()}_defaultRenderItem(t){return`\n        <div class="box blurr">\n          <img class="slide" src="${t.photo.startsWith("./")?"./photos/"+t.photo}" alt="${t.title}" />\n          <div class="slide-content">\n            <h5 class="slide-title">${t.title.split(":")[0]}</h5>\n            <p class="slide-description">${this._clipString(t.description,100)}</p>\n          </div>\n        </div>\n      `}_clipString(t,e){return t.length>e?t.slice(0,e)+"...":t}_handleCarouselCreation(t){this.carousel.innerHTML="",this._makeSlides(t,this.carousel),this._makeSlides(t,this.carousel),this._makeSlides(t,this.carousel),this._makePagination(t.length)}_makePagination(t){this.pagination.innerHTML="";for(let e=0;e<t;e++){const t=document.createElement("div");t.classList.add("dot"),this.pagination.appendChild(t)}}_makeSlides(t,e){t.forEach(t=>{const i=this.options.renderItem(t),s=document.createElement("div");s.innerHTML=i.trim(),e.appendChild(s.firstChild)})}_startAutoRotation(){this.autoRotateInterval&&clearInterval(this.autoRotateInterval),this.autoRotateInterval=setInterval(()=>{this._handleAutoRotation()},this.options.autoRotateDelay)}_stopAutoRotation(){this.autoRotateInterval&&(clearInterval(this.autoRotateInterval),this.autoRotateInterval=null)}_handleAutoRotation(){this.anchorTime&&!(Date.now()-this.anchorTime>=3e3)||this._gotoNextSlideAction()}_updatePagination(t,e,i){let s=t;const a=this.container.querySelectorAll(".dot");for(;s-e>=0;)s-=e;for(let t=s;t<s+i;t++)a[t%e].classList.toggle("active-dot")}_setupVariables(t,e){this.N=t,this.X=e,this.carousel.style.width=`calc(100% / ${e+1} * ${t} * 3)`,this.carousel.style.transform=`translateX(calc(100% / ${t}/2/3 - 100% / 3))`,this._removeBoxAnimation(),setTimeout(()=>{this._handleBoxAnimationToggle(t,t,e)},100)}_getCurrentTranslateX(){const t=window.getComputedStyle(this.carousel).transform;let e=0;if("none"!==t){e=parseFloat(t.match(/matrix\(([^)]+)\)/)[1].split(", ")[4])}return e}_getSlidingWidth(){return this.carousel.offsetWidth/(3*this.N)}_getLeftSlideCount(){return Math.floor(-1*this._getCurrentTranslateX()/this._getSlidingWidth())}_throttle(){return!!this.anchorTime&&!(Date.now()-this.anchorTime>=400)}_gotoNextSlideAction(){if(this._throttle())return;this.anchorTime=Date.now();const t=this.N,e=this.X;this._getLeftSlideCount()+e+2>=(3*t-2)&&setTimeout(()=>{this.carousel.style.transition="none",this.carousel.style.transform=`translateX(${this._getCurrentTranslateX()+this.carousel.offsetWidth/3}px)`},250),this._handleBoxAnimationToggle(this._getLeftSlideCount()+1,t,e),this._handleBoxAnimationToggle(this._getLeftSlideCount()+2,t,e),this._updatePagination(this._getLeftSlideCount()+1,t,e),this._updatePagination(this._getLeftSlideCount()+2,t,e),this.carousel.style.transition="all 200ms ease-in-out",this.carousel.style.transform=`translateX(${this._getCurrentTranslateX()-this._getSlidingWidth()}px)`,"function"==typeof this.options.onSlideChange&&this.options.onSlideChange(this._getLeftSlideCount()+1)}_gotoPrevSlideAction(){if(this._throttle())return;this.anchorTime=Date.now(),this._getLeftSlideCount()<=1&&setTimeout(()=>{this.carousel.style.transition="none",this.carousel.style.transform=`translateX(${this._getCurrentTranslateX()-this.carousel.offsetWidth/3}px)`},250),this._handleBoxAnimationToggle(this._getLeftSlideCount()+1,this.N,this.X),this._handleBoxAnimationToggle(this._getLeftSlideCount(),this.N,this.X),this._updatePagination(this._getLeftSlideCount()+1,this.N,this.X),this._updatePagination(this._getLeftSlideCount(),this.N,this.X),this.carousel.style.transition="all 200ms ease-in-out",this.carousel.style.transform=`translateX(${this._getCurrentTranslateX()+this._getSlidingWidth()}px)`,"function"==typeof this.options.onSlideChange&&this.options.onSlideChange(this._getLeftSlideCount())}_removeBoxAnimation(){const t=this.container.querySelectorAll(".box");for(let e=0;e<t.length;e++)t[e].classList.add("blurr")}_handleBoxAnimationToggle(t,e,i){const s=this.container.querySelectorAll(".box");let a=t;for(;a-e>=0;)a-=e;for(let t=a;t<3*e;t+=e)for(let a=0;a<i&&t+a<3*e;a++)s[t+a].classList.toggle("blurr")}next(){this._gotoNextSlideAction()}prev(){this._gotoPrevSlideAction()}startAutoRotation(){this._startAutoRotation()}stopAutoRotation(){this._stopAutoRotation()}update(t){this.options=Object.assign(this.options,t);const e=t.totalItems||t.items||t.renderItem;e&&(this.N=this.options.totalItems,this.X=this.options.adaptToMobile&&this._isMobileDevice()?this.options.mobileVisibleItems:this.options.visibleItems,t.items&&(this.items=t.items),this._handleCarouselCreation(this.items.slice(0,this.N))),this._setupVariables(this.N,this.X),this._updatePagination(0,this.N,this.X),void 0!==t.autoRotate&&(t.autoRotate?this._startAutoRotation():this._stopAutoRotation())}destroy(){this._stopAutoRotation(),this.btnRight.removeEventListener("click",this._gotoNextSlideAction),this.btnLeft.removeEventListener("click",this._gotoPrevSlideAction),document.removeEventListener("keydown",this._handleKeyPress),this.options.adaptToMobile&&window.removeEventListener("resize",this._handleResize),this.container.innerHTML="",this.container.classList.remove("slider")}}}); 